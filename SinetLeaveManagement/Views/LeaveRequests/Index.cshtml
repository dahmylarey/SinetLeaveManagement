@model IEnumerable<SinetLeaveManagement.Models.LeaveRequest>
<div class="container mt-4">
    <h2 class="mb-4">Leave Requests</h2>
    @if (User.IsInRole("Employee"))
    {
        <a asp-action="Create" class="btn btn-primary mb-3">Request New Leave</a>
    }
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Employee</th>
                    <th>Start Date</th>
                    <th>End Date</th>
                    <th>Type</th>
                    <th>Status</th>
                    <th>Comments</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var request in Model)
                {
                    <tr>
                        <td>@request.Employee.FirstName @request.Employee.LastName</td>
                        <td>@request.StartDate.ToShortDateString()</td>
                        <td>@request.EndDate.ToShortDateString()</td>
                        <td>@request.LeaveType</td>
                        <td>
                            <span class="badge
                                    @(request.Status == "Approved" ? "bg-success" :
                                                                    request.Status == "Rejected" ? "bg-danger" :
                                                                    "bg-warning")">
                            @request.Status
                        </span>
                    </td>
                    <td>@request.Comments</td>
                    <td>
                        @if ((User.IsInRole("Manager") || User.IsInRole("Supervisor")) && request.Status == "Pending")
                            {
                                <a asp-action="Approve" asp-route-id="@request.Id" class="btn btn-success btn-sm">Approve</a>
                                <a asp-action="Reject" asp-route-id="@request.Id" class="btn btn-danger btn-sm">Reject</a>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>